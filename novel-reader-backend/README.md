# Novel Reader Backend

è¯»ä¹¦ç½‘ç«™åç«¯ - çˆ¬è™«æ ¸å¿ƒåŠŸèƒ½

## ğŸ“Œ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäºSpring Bootå¼€å‘çš„è¯»ä¹¦ç½‘ç«™åç«¯ç³»ç»Ÿï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯çˆ¬å–å¤šä¸ªå°è¯´å¹³å°çš„å°è¯´æ•°æ®ï¼Œå¹¶æä¾›APIæ¥å£ä¾›å‰ç«¯è°ƒç”¨ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- âœ… **å¤šå¹³å°çˆ¬è™«**ï¼šæ”¯æŒåˆºçŒ¬çŒ«ã€SFè½»å°è¯´ã€æ¬¡å…ƒå§¬ã€èµ·ç‚¹
- âœ… **AIæ¦‚æ‹¬**ï¼šé¦–æ¬¡æŠ“å–æ—¶è‡ªåŠ¨ç”Ÿæˆå‰3ç« ç»¼åˆæ¦‚æ‹¬
- âœ… **å®šæ—¶ä»»åŠ¡**ï¼šæ¯2å°æ—¶è‡ªåŠ¨æ›´æ–°å°è¯´ä¿¡æ¯
- âœ… **å¢é‡æ›´æ–°**ï¼šåªæ›´æ–°æœ‰å˜åŒ–çš„ä¿¡æ¯
- âœ… **RESTful API**ï¼šæä¾›å®Œæ•´çš„APIæ¥å£

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- JDK 11+
- Maven 3.6+
- H2æ•°æ®åº“ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- MySQL 8.0+ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- Redis 7ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

### æœ¬åœ°è¿è¡Œ

```bash
# å…‹éš†é¡¹ç›®
cd novel-reader-backend

# ä½¿ç”¨Mavenç¼–è¯‘ï¼ˆå¦‚æœæ²¡æœ‰å®‰è£…Mavenï¼Œå¯ä»¥ä½¿ç”¨Maven Wrapperï¼‰
# æ³¨æ„ï¼šéœ€è¦å…ˆå®‰è£…Mavenæˆ–ä¸‹è½½Maven Wrapper

# è¿è¡Œé¡¹ç›®ï¼ˆéœ€è¦Mavenï¼‰
mvn spring-boot:run

# æˆ–è€…ç›´æ¥è¿è¡Œç¼–è¯‘åçš„jaråŒ…
java -jar target/novel-reader-backend-1.0.0.jar
```

### è®¿é—®æ¥å£

- **å¥åº·æ£€æŸ¥**: http://localhost:8080/api/crawler/health
- **æ‰‹åŠ¨è§¦å‘çˆ¬è™«**: http://localhost:8080/api/crawler/trigger
- **è·å–æ‰€æœ‰å°è¯´**: http://localhost:8080/api/crawler/novels
- **çˆ¬è™«é…ç½®**: http://localhost:8080/api/crawler/configs
- **H2æ§åˆ¶å°**: http://localhost:8080/h2-console

## ğŸ“Š APIæ–‡æ¡£

å¯åŠ¨é¡¹ç›®åè®¿é—® Swagger UIï¼š
http://localhost:8080/swagger-ui.html

## ğŸ—„ï¸ æ•°æ®åº“

### å¼€å‘ç¯å¢ƒ

ä½¿ç”¨H2å†…å­˜æ•°æ®åº“ï¼Œè‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ã€‚

### ç”Ÿäº§ç¯å¢ƒ

éœ€è¦é…ç½®MySQLæ•°æ®åº“ï¼Œä¿®æ”¹ `application.yml`ï¼š

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/novel_reader?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: your-password
    driver-class-name: com.mysql.cj.jdbc.Driver
```

## ğŸ¤– AIæ¦‚æ‹¬é…ç½®

### æ™ºè°±AIé…ç½®

éœ€è¦åœ¨ç¯å¢ƒå˜é‡æˆ– `application.yml` ä¸­é…ç½®API Keyï¼š

```yaml
ai:
  zhipu:
    api-key: your-zhipu-api-key
    base-url: https://open.bigmodel.cn/api/paas/v4/chat/completions
    model: glm-4
```

æˆ–è€…è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
export ZHIPU_API_KEY=your-zhipu-api-key
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
novel-reader-backend/
â”œâ”€â”€ src/main/java/com/novelreader/
â”‚   â”œâ”€â”€ config/           # é…ç½®ç±»
â”‚   â”œâ”€â”€ controller/       # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ crawler/          # çˆ¬è™«
â”‚   â”‚   â”œâ”€â”€ impl/        # çˆ¬è™«å®ç°
â”‚   â”‚   â””â”€â”€ model/       # çˆ¬è™«æ¨¡å‹
â”‚   â”œâ”€â”€ entity/           # å®ä½“ç±»
â”‚   â”œâ”€â”€ repository/       # Repository
â”‚   â”œâ”€â”€ service/          # æœåŠ¡ç±»
â”‚   â””â”€â”€ NovelReaderApplication.java
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml
```

## ğŸ”„ å¼€å‘è¿›åº¦

- [x] é¡¹ç›®ç»“æ„æ­å»º
- [x] å®ä½“ç±»å®šä¹‰
- [x] Repositoryæ¥å£
- [x] ServiceæœåŠ¡
- [x] çˆ¬è™«åŸºç¡€æ¥å£
- [x] åˆºçŒ¬çŒ«çˆ¬è™«å®ç°
- [x] çˆ¬è™«è°ƒåº¦å™¨
- [x] AIæ¦‚æ‹¬æœåŠ¡ï¼ˆç®€åŒ–ç‰ˆï¼‰
- [x] æ•°æ®åˆå§‹åŒ–å™¨
- [x] RESTful API
- [ ] SFè½»å°è¯´çˆ¬è™«
- [ ] æ¬¡å…ƒå§¬çˆ¬è™«
- [ ] èµ·ç‚¹çˆ¬è™«
- [ ] æ™ºè°±AI APIé›†æˆ
- [ ] MySQLæ•°æ®åº“é…ç½®
- [ ] Redisç¼“å­˜é…ç½®
- [ ] çˆ¬è™«åå°ç®¡ç†ç•Œé¢

## ğŸ“ å¾…åŠäº‹é¡¹

### é«˜ä¼˜å…ˆçº§ï¼ˆP0ï¼‰

1. å®ç°SFè½»å°è¯´çˆ¬è™«
2. å®ç°æ¬¡å…ƒå§¬çˆ¬è™«
3. å®ç°èµ·ç‚¹çˆ¬è™«
4. é›†æˆæ™ºè°±AI API
5. é…ç½®MySQLæ•°æ®åº“

### æ¬¡è¦ä¼˜å…ˆçº§ï¼ˆP1ï¼‰

6. é…ç½®Redisç¼“å­˜
7. å¼€å‘çˆ¬è™«åå°ç®¡ç†ç•Œé¢
8. ä¼˜åŒ–åçˆ¬è™«ç­–ç•¥
9. æ·»åŠ æ—¥å¿—è®°å½•
10. å•å…ƒæµ‹è¯•

## ğŸ“¦ æ–‡ä»¶å­˜å‚¨

### å¤´åƒå­˜å‚¨

ç”¨æˆ·å¤´åƒé»˜è®¤å­˜å‚¨åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ `novel-reader/uploads/avatar/` ç›®å½•ï¼ˆå¦‚ Windows: `C:\Users\ç”¨æˆ·å\novel-reader\uploads\avatar\`ï¼ŒLinux: `/home/ç”¨æˆ·å/novel-reader/uploads/avatar/`ï¼‰ã€‚

**é…ç½®é¡¹ï¼ˆapplication.ymlï¼‰ï¼š**

```yaml
upload:
  avatar:
    path: /data/uploads/avatar    # è‡ªå®šä¹‰å­˜å‚¨è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰ï¼Œä¸é…ç½®åˆ™ä½¿ç”¨é»˜è®¤è·¯å¾„
    max-size: 2097152             # æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ï¼Œé»˜è®¤2MB
```

**æœåŠ¡å™¨è¿ç§»æ³¨æ„äº‹é¡¹ï¼š**

è¿ç§»æœåŠ¡å™¨æ—¶ï¼Œéœ€è¦åŒæ—¶è¿ç§»ä»¥ä¸‹å†…å®¹ï¼š

| è¿ç§»é¡¹ | è¯´æ˜ |
|--------|------|
| æ•°æ®åº“ | å¯¼å‡ºMySQLæ•°æ®å¹¶å¯¼å…¥æ–°æœåŠ¡å™¨ |
| `~/novel-reader/uploads/` ç›®å½• | åŒ…å«ç”¨æˆ·ä¸Šä¼ çš„å¤´åƒæ–‡ä»¶ï¼ˆé»˜è®¤è·¯å¾„ï¼‰ |
| `application.yml` | é…ç½®æ–‡ä»¶ï¼ˆæ•°æ®åº“è¿æ¥ã€JWTå¯†é’¥ç­‰ï¼‰ |

**è¿ç§»å‘½ä»¤ç¤ºä¾‹ï¼š**

```bash
# æ‰“åŒ…ä¸Šä¼ æ–‡ä»¶ç›®å½•ï¼ˆé»˜è®¤è·¯å¾„ï¼‰
tar -czvf uploads.tar.gz ~/novel-reader/uploads/

# åœ¨æ–°æœåŠ¡å™¨è§£å‹
tar -xzvf uploads.tar.gz -C ~/
```

**ç”Ÿäº§ç¯å¢ƒå»ºè®®ï¼š**

å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®ä½¿ç”¨äº‘å­˜å‚¨æœåŠ¡ï¼ˆå¦‚é˜¿é‡Œäº‘OSSã€è…¾è®¯äº‘COSï¼‰æ›¿ä»£æœ¬åœ°å­˜å‚¨ï¼Œä¼˜ç‚¹ï¼š
- æ— éœ€è¿ç§»æ–‡ä»¶
- CDNåŠ é€Ÿè®¿é—®
- é«˜å¯ç”¨æ€§

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

---

**å¼€å‘ä¸­ï¼Œéšæ—¶å‘æˆ‘æ±‡æŠ¥è¿›åº¦ï¼** ğŸ¦
