# Novel Reader 前端测试指南

**测试时间**: 2026-02-18  
**前端地址**: http://localhost:3000/  
**Mock模式**: 已启用（`USE_MOCK = true`）

---

## 🚀 启动前端项目

```bash
cd novel-reader/novel-reader-frontend
npm run dev
```

访问地址：http://localhost:3000/

---

## 📋 测试清单

### 1. 仪表盘（Dashboard）- 默认首页

**测试项**：
- ✅ 统计卡片显示（总小说数、今日抓取、任务成功率、失败任务）
- ✅ 平台小说数量分布图
- ✅ 平台状态表格（启用状态、最后执行时间）
- ✅ 点击"执行"按钮触发平台爬虫
- ✅ 点击"刷新"按钮重新加载数据

**预期行为**：
- 统计数字显示正确
- 进度条显示各平台占比
- 表格显示4个平台（刺猬猫、SF轻小说、次元姬、起点）
- 点击执行后显示成功消息

---

### 2. 数据浏览（Novels）

**访问路径**：点击左侧菜单"数据浏览"

**测试项**：
- ✅ 小说列表显示（封面、书名、作者、平台、最新章节、更新时间、状态）
- ✅ 分页功能（每页数量、翻页）
- ✅ 平台筛选（全部、刺猬猫、SF轻小说、次元姬、起点）
- ✅ 关键词搜索（书名/作者）
- ✅ 点击书名跳转到详情页
- ✅ 点击"详情"按钮跳转到详情页

**预期行为**：
- 默认显示所有小说
- 选择平台后显示对应平台的小说
- 输入关键词后过滤显示
- 分页器显示正确的页数
- 点击书名或详情按钮进入详情页

---

### 3. 平台配置（Platforms）

**访问路径**：点击左侧菜单"平台配置"

**测试项**：
- ✅ 显示4个平台配置卡片
- ✅ 开关切换启用/禁用状态
- ✅ 修改抓取间隔
- ✅ 标签管理（添加、删除）
- ✅ 保存配置功能
- ✅ 手动执行爬虫
- ✅ 测试爬虫功能
- ✅ 启动全部爬虫按钮

**预期行为**：
- 点击开关后状态立即更新
- 修改抓取间隔后显示转换后的时间
- 输入标签后按回车添加标签
- 点击标签的删除图标移除标签
- 点击"保存配置"后显示成功消息
- 点击"手动执行"后显示成功消息并更新状态为"运行中"
- 点击"测试爬虫"弹出对话框显示测试结果

**测试爬虫对话框**：
- 显示平台、标签、状态、数量
- 失败时显示错误信息
- 成功时显示前10本小说列表

---

### 4. 任务列表（Tasks）

**访问路径**：点击左侧菜单"任务列表"

**测试项**：
- ✅ 任务列表显示（平台、任务类型、状态、开始时间、结束时间、总数、成功、失败）
- ✅ 分页功能
- ✅ 状态标签（运行中-橙色、成功-绿色、失败-红色、等待中-灰色）
- ✅ 点击"详情"按钮跳转到任务详情页
- ✅ 点击"重试"按钮（仅失败任务显示）

**预期行为**：
- 显示模拟的任务数据
- 状态标签颜色正确
- 成功数和失败数颜色正确（绿色/红色）
- 分页器正确显示
- 点击详情按钮进入详情页
- 重试按钮仅在失败任务上显示

---

### 5. 任务详情（TaskDetail）

**访问路径**：从任务列表点击"详情"按钮

**测试项**：
- ✅ 返回按钮（返回任务列表）
- ✅ 基本信息（任务ID、平台、状态、开始时间、结束时间、执行时长、总数、成功、失败）
- ✅ 执行日志显示
- ✅ 日志容器滚动

**预期行为**：
- 所有信息正确显示
- 时间格式正确（YYYY-MM-DD HH:mm:ss）
- 执行时长自动计算
- 日志内容在黑色背景容器中显示
- 日志容器可以滚动查看

---

### 6. 小说详情（NovelDetail）

**访问路径**：从小说列表点击书名或"详情"按钮

**测试项**：
- ✅ 返回按钮（返回小说列表）
- ✅ 封面图片显示
- ✅ 书名、作者、平台标签、状态标签
- ✅ 最新章节、更新时间
- ✅ 抓取次数、最后抓取时间
- ✅ 简介内容
- ✅ AI概括（如果存在）

**预期行为**：
- 封面图片正常显示（或显示占位符）
- 所有元数据正确显示
- 简介内容完整显示
- AI概括内容在灰色背景容器中显示

---

## 🔧 Mock 数据说明

### 小说数据（6本）

1. **修仙从系统开始**（刺猬猫）
   - 作者：逍遥子
   - 状态：连载
   - 标签：玄幻、修仙、系统

2. **都市之超级神医**（刺猬猫）
   - 作者：神医下山
   - 状态：连载
   - 标签：都市、神医、系统

3. **二次元之无限进化**（SF轻小说）
   - 作者：二次元之王
   - 状态：连载
   - 标签：二次元、穿越、同人

4. **魔法学院的异类**（SF轻小说）
   - 作者：魔法师
   - 状态：连载
   - 标签：魔法、奇幻、成长

5. **动漫之最强主角**（次元姬）
   - 作者：宅神
   - 状态：连载
   - 标签：动漫、穿越、同人

6. **我的动漫人生**（次元姬）
   - 作者：动漫迷
   - 状态：连载
   - 标签：动漫、校园、恋爱

### 平台配置（4个）

- 刺猬猫：启用
- SF轻小说：启用
- 次元姬：启用
- 起点：禁用

### 任务数据（4个）

1. 刺猬猫定时抓取 - 成功
2. SF轻小说定时抓取 - 成功
3. 次元姬定时抓取 - 运行中
4. 刺猬猫手动执行 - 失败

---

## 📊 API 调用验证

### 控制台检查

打开浏览器开发者工具（F12），查看Console标签：

**预期看到的日志**：
```
加载小说列表
加载配置
加载任务列表
加载任务详情
加载小说列表
```

**Network标签检查**：
- 所有API调用都应该返回Mock数据
- 请求状态码应该是200
- 响应时间应该在300ms左右（模拟延迟）

---

## 🎯 测试结论

### ✅ 已通过测试

- [ ] Dashboard统计数据显示
- [ ] 小说列表和筛选
- [ ] 平台配置管理
- [ ] 任务列表和详情
- [ ] 小说详情展示
- [ ] Mock数据返回正确

### ⚠️ 注意事项

1. **Mock模式**：当前使用Mock数据，后端API未调用
2. **图片占位符**：封面图片使用随机占位图服务
3. **时间格式**：所有时间都是模拟数据
4. **日志内容**：任务日志是模拟的完整日志

---

## 🚀 切换到真实后端

### 步骤1：启动后端

```bash
cd novel-reader/novel-reader-backend
mvn spring-boot:run
```

### 步骤2：修改前端配置

编辑 `novel-reader-frontend/src/api/index.js`：

```javascript
// 改为 false 使用真实后端
const USE_MOCK = false
```

### 步骤3：重启前端

```bash
# Ctrl+C 停止当前前端
npm run dev
```

### 步骤4：验证

- 访问 http://localhost:3000/
- 检查浏览器Console，确认调用真实API
- 检查Network标签，确认请求发送到后端

---

## 📝 已知问题

1. **起点平台**：配置为禁用状态，无法执行
2. **分页数据**：Mock数据只有6本小说，分页效果不明显
3. **任务状态**：运行中任务不会自动更新为完成（Mock数据固定）
4. **图片加载**：使用picsum.photos随机图片，可能加载较慢

---

## 💡 测试建议

### 基本功能测试
1. 浏览所有页面，确认布局正常
2. 测试所有按钮，确认点击有反馈
3. 测试筛选和搜索功能
4. 测试分页功能

### 交互测试
1. 测试配置保存功能
2. 测试爬虫执行功能
3. 测试爬虫测试功能
4. 测试页面跳转功能

### 边界情况测试
1. 切换到起点平台（禁用状态）
2. 搜索不存在的关键词
3. 查看失败任务的详情
4. 快速刷新页面

---

**测试完成标准**：
- 所有页面正常显示
- 所有按钮都有响应
- Mock数据正确返回
- 无Console错误信息

---

*测试指南生成时间: 2026-02-18* 🦞
