# è¯»ä¹¦ç½‘ç«™ - çˆ¬è™«åŠŸèƒ½è®¾è®¡æ–‡æ¡£

## ğŸ“Œ è®¾è®¡ç›®æ ‡

**æ ¸å¿ƒä¼˜å…ˆçº§**ï¼šçˆ¬è™«åŠŸèƒ½æ˜¯è¯»ä¹¦ç½‘ç«™çš„æ ¸å¿ƒï¼Œå¿…é¡»é¦–å…ˆå®ç°

### åŠŸèƒ½è¦æ±‚
1. æ”¯æŒ4ä¸ªå¹³å°ï¼šåˆºçŒ¬çŒ«ã€SFè½»å°è¯´ã€æ¬¡å…ƒå§¬ã€èµ·ç‚¹
2. æ ¹æ®æ ‡ç­¾è¿‡æ»¤ï¼ŒåªæŠ“å–æŒ‡å®šæ ‡ç­¾çš„ä¹¦ç±
3. é¦–æ¬¡æŠ“å–ï¼šæŠ“å–å‰3-5ç« å†…å®¹ + AIæ¦‚æ‹¬
4. å®šæ—¶ä»»åŠ¡ï¼šæ¯2å°æ—¶æ›´æ–°ä¸€æ¬¡
5. åçˆ¬è™«åº”å¯¹ï¼šä»£ç†IPã€User-Agentã€è¯·æ±‚é¢‘ç‡æ§åˆ¶

---

## ğŸŒ æ”¯æŒå¹³å°é…ç½®

### 1. åˆºçŒ¬çŒ« (Ciweimao)
- **å®˜ç½‘**ï¼šhttps://mip.ciweimao.com/
- **å¹³å°æ ‡è¯†**ï¼š`ciweimao`
- **ç‰¹ç‚¹**ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆï¼Œæ ‡ç­¾ä¸°å¯Œ
- **å»ºè®®æ ‡ç­¾**ï¼šç„å¹»ã€ä¿®ä»™ã€éƒ½å¸‚ã€ç³»ç»Ÿ

### 2. SFè½»å°è¯´ (SF Light Novel)
- **å®˜ç½‘**ï¼šhttps://book.sfacg.com/
- **å¹³å°æ ‡è¯†**ï¼š`sf`
- **ç‰¹ç‚¹**ï¼šè½»å°è¯´ä¸ºä¸»ï¼ŒäºŒæ¬¡å…ƒé£æ ¼
- **å»ºè®®æ ‡ç­¾**ï¼šç„å¹»ã€è½»å°è¯´ã€äºŒæ¬¡å…ƒ

### 3. æ¬¡å…ƒå§¬ (Ciyuanji)
- **å®˜ç½‘**ï¼šhttps://www.ciyuanji.com/
- **å¹³å°æ ‡è¯†**ï¼š`ciyuanji`
- **ç‰¹ç‚¹**ï¼šå°è¯´+æ¼«ç”»ç»¼åˆå¹³å°
- **å»ºè®®æ ‡ç­¾**ï¼šç„å¹»ã€ä»™ä¾ ã€éƒ½å¸‚

### 4. èµ·ç‚¹ (Qidian)
- **å®˜ç½‘**ï¼šhttps://www.qidian.com/
- **å¹³å°æ ‡è¯†**ï¼š`qidian`
- **ç‰¹ç‚¹**ï¼šå›½å†…æœ€å¤§å°è¯´å¹³å°
- **å»ºè®®æ ‡ç­¾**ï¼šç„å¹»ã€ä»™ä¾ ã€éƒ½å¸‚ã€ç§‘å¹»

---

## ğŸ“¦ æ•°æ®æ¨¡å‹

### ChapterSummaryï¼ˆç« èŠ‚æ¦‚æ‹¬ï¼‰

```java
@Data
public class ChapterSummary {
    private Integer chapter;      // ç« èŠ‚åºå·
    private String title;        // ç« èŠ‚æ ‡é¢˜
    private String summary;      // AIæ¦‚æ‹¬
}
```

### JsonUtilsï¼ˆJSONå·¥å…·ç±»ï¼‰

```java
@Component
public class JsonUtils {
    private static final ObjectMapper objectMapper = new ObjectMapper();

    static {
        objectMapper.registerModule(new JavaTimeModule());
    }
}
```

---

## ğŸ—ï¸ çˆ¬è™«æ¶æ„è®¾è®¡

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          çˆ¬è™«è°ƒåº¦å™¨                   â”‚
â”‚      CrawlerScheduler               â”‚
â”‚    å®šæ—¶ä»»åŠ¡ï¼ˆæ¯2å°æ—¶ï¼‰                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         çˆ¬è™«ä»»åŠ¡åˆ†å‘å™¨                â”‚
â”‚     CrawlerTaskDispatcher            â”‚
â”‚   æ ¹æ®å¹³å°é…ç½®åˆ†å‘ä»»åŠ¡                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            â”‚            â”‚
    â–¼            â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚åˆºçŒ¬çŒ«   â”‚ â”‚SFè½»å°è¯´ â”‚ â”‚æ¬¡å…ƒå§¬   â”‚
â”‚Crawler  â”‚ â”‚Crawler  â”‚ â”‚Crawler  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚            â”‚            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æ•°æ®æ¸…æ´—æ¨¡å—                â”‚
â”‚       DataCleaner                   â”‚
â”‚   å»é‡ã€æ ¼å¼è½¬æ¢ã€å¼‚å¸¸å¤„ç†             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         â”‚
    â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®åº“  â”‚           â”‚   AIæ¦‚æ‹¬     â”‚
â”‚  å­˜å‚¨    â”‚           â”‚  è°ƒç”¨API     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          çˆ¬è™«æ—¥å¿—è®°å½•                â”‚
â”‚     CrawlerTaskLogger               â”‚
â”‚   è®°å½•ä»»åŠ¡æ‰§è¡Œæƒ…å†µ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ æ¨¡å—è®¾è®¡

### 1. çˆ¬è™«è°ƒåº¦å™¨ (CrawlerScheduler)

**èŒè´£**ï¼š
- å®šæ—¶è§¦å‘çˆ¬è™«ä»»åŠ¡
- ä»æ•°æ®åº“è¯»å–å¹³å°é…ç½®
- åˆ†å‘ä»»åŠ¡åˆ°å„å¹³å°çˆ¬è™«

**æŠ€æœ¯å®ç°**ï¼š
```java
@Component
public class CrawlerScheduler {

    @Autowired
    private CrawlerTaskDispatcher dispatcher;

    /**
     * å®šæ—¶ä»»åŠ¡ï¼šæ¯2å°æ—¶æ‰§è¡Œä¸€æ¬¡
     */
    @Scheduled(cron = "0 0 */2 * * ?")
    public void scheduleCrawlerTask() {
        log.info("å¼€å§‹æ‰§è¡Œå®šæ—¶çˆ¬è™«ä»»åŠ¡");

        // è·å–æ‰€æœ‰å¯ç”¨çš„å¹³å°é…ç½®
        List<CrawlerConfig> configs = crawlerConfigService.findAllEnabled();

        // åˆ†å‘ä»»åŠ¡
        configs.forEach(config -> {
            dispatcher.dispatchCrawlerTask(config);
        });

        log.info("å®šæ—¶çˆ¬è™«ä»»åŠ¡åˆ†å‘å®Œæˆ");
    }
}
```

---

### 2. çˆ¬è™«ä»»åŠ¡åˆ†å‘å™¨ (CrawlerTaskDispatcher)

**èŒè´£**ï¼š
- æ ¹æ®å¹³å°ç±»å‹åˆ†å‘ä»»åŠ¡
- å¼‚æ­¥æ‰§è¡Œçˆ¬è™«ä»»åŠ¡
- è®°å½•ä»»åŠ¡çŠ¶æ€

**æŠ€æœ¯å®ç°**ï¼š
```java
@Service
public class CrawlerTaskDispatcher {

    @Autowired
    private Map<String, BaseCrawler> crawlerMap;

    /**
     * åˆ†å‘çˆ¬è™«ä»»åŠ¡
     */
    @Async
    public void dispatchCrawlerTask(CrawlerConfig config) {
        // åˆ›å»ºä»»åŠ¡è®°å½•
        CrawlerTask task = crawlerTaskService.createTask(config.getPlatform());

        try {
            // è·å–å¯¹åº”å¹³å°çš„çˆ¬è™«
            BaseCrawler crawler = crawlerMap.get(config.getPlatform());

            // æ‰§è¡Œçˆ¬è™«
            CrawlerResult result = crawler.crawl(config);

            // æ›´æ–°ä»»åŠ¡çŠ¶æ€
            crawlerTaskService.updateTaskSuccess(task, result);

        } catch (Exception e) {
            log.error("çˆ¬è™«ä»»åŠ¡æ‰§è¡Œå¤±è´¥", e);
            crawlerTaskService.updateTaskFailed(task, e.getMessage());
        }
    }
}
```

---

### 3. åŸºç¡€çˆ¬è™«æ¥å£ (BaseCrawler)

**èŒè´£**ï¼š
- å®šä¹‰çˆ¬è™«ç»Ÿä¸€æ¥å£
- æä¾›é€šç”¨æ–¹æ³•ï¼ˆä¸‹è½½å›¾ç‰‡ã€è§£æHTMLç­‰ï¼‰

**æŠ€æœ¯å®ç°**ï¼š
```java
public interface BaseCrawler {

    /**
     * æ‰§è¡Œçˆ¬è™«ä»»åŠ¡
     */
    CrawlerResult crawl(CrawlerConfig config) throws Exception;

    /**
     * è§£æå°è¯´åˆ—è¡¨
     */
    List<Novel> parseNovelList(Document doc, List<String> tags);

    /**
     * è§£æå°è¯´è¯¦æƒ…
     */
    Novel parseNovelDetail(Document doc);

    /**
     * è§£æç« èŠ‚å†…å®¹
     */
    List<Chapter> parseChapterList(Document doc, int limit);
}
```

---

### 4. å¹³å°çˆ¬è™«å®ç°

#### 4.1 åˆºçŒ¬çŒ«çˆ¬è™« (CiweimaoCrawler)

```java
@Component
public class CiweimaoCrawler implements BaseCrawler {

    @Override
    public CrawlerResult crawl(CrawlerConfig config) throws Exception {
        log.info("å¼€å§‹çˆ¬å–åˆºçŒ¬çŒ«å°è¯´");

        CrawlerResult result = new CrawlerResult();
        List<Novel> novels = new ArrayList<>();

        // éå†æ ‡ç­¾
        List<String> tags = parseTags(config.getTags());
        for (String tag : tags) {
            // æ„å»ºURL
            String url = buildTagUrl(tag);

            // ä¸‹è½½HTML
            Document doc = Jsoup.connect(url)
                .userAgent(getRandomUserAgent())
                .timeout(30000)
                .get();

            // è§£æå°è¯´åˆ—è¡¨
            List<Novel> tagNovels = parseNovelList(doc, config.getTags());
            novels.addAll(tagNovels);
        }

        // ä¿å­˜åˆ°æ•°æ®åº“
        for (Novel novel : novels) {
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
            Novel existing = novelService.findByPlatformAndNovelId(
                novel.getPlatform(),
                novel.getNovelId()
            );

            if (existing == null) {
                // é¦–æ¬¡æŠ“å–ï¼ŒæŠ“å–å‰3ç« 
                List<Chapter> chapters = fetchChapters(novel, 3);

                // AIæ¦‚æ‹¬å‰3ç« 
                List<ChapterSummary> summaries = new ArrayList<>();
                for (int i = 0; i < chapters.size(); i++) {
                    Chapter chapter = chapters.get(i);
                    String summary = aiSummaryService.summarize(chapter.getContent());

                    ChapterSummary chapterSummary = new ChapterSummary();
                    chapterSummary.setChapter(i + 1);
                    chapterSummary.setTitle(chapter.getTitle());
                    chapterSummary.setSummary(summary);

                    summaries.add(chapterSummary);
                }

                // ä¿å­˜AIæ¦‚æ‹¬åˆ°å°è¯´è¡¨ï¼ˆJSONæ ¼å¼ï¼‰
                novel.setFirstChaptersSummary(JsonUtils.toJson(summaries));

                // ä¿å­˜å°è¯´
                novelService.save(novel);
            } else {
                // æ›´æ–°å·²æœ‰å°è¯´
                updateNovel(existing, novel);
            }
        }

        result.setSuccessCount(novels.size());
        result.setTotalCount(novels.size());

        log.info("åˆºçŒ¬çŒ«çˆ¬å–å®Œæˆï¼ŒæˆåŠŸ{}æœ¬", novels.size());
        return result;
    }

    /**
     * è§£æå°è¯´åˆ—è¡¨
     */
    @Override
    public List<Novel> parseNovelList(Document doc, List<String> tags) {
        List<Novel> novels = new ArrayList<>();

        // æ ¹æ®åˆºçŒ¬çŒ«çš„HTMLç»“æ„è§£æ
        Elements elements = doc.select("div.book-item");

        for (Element element : elements) {
            Novel novel = new Novel();
            novel.setPlatform("ciweimao");

            // è§£æå­—æ®µ
            String novelId = element.attr("data-novel-id");
            String title = element.select("h3.title").text();
            String author = element.select("span.author").text();
            String description = element.select("div.desc").text();
            String coverUrl = element.select("img.cover").attr("src");

            // è®¾ç½®å­—æ®µ
            novel.setNovelId(novelId);
            novel.setTitle(title);
            novel.setAuthor(author);
            novel.setDescription(description);
            novel.setCoverUrl(coverUrl);

            // è§£ææ ‡ç­¾
            List<String> novelTags = parseTags(element);
            novel.setTags(novelTags);

            novels.add(novel);
        }

        return novels;
    }
}
```

---

#### 4.2 SFè½»å°è¯´çˆ¬è™« (SfCrawler)

```java
@Component
public class SfCrawler implements BaseCrawler {

    @Override
    public CrawlerResult crawl(CrawlerConfig config) throws Exception {
        // å®ç°ç±»ä¼¼CiweimaoCrawler
        // æ ¹æ®SFè½»å°è¯´çš„HTMLç»“æ„è§£æ
    }
}
```

---

#### 4.3 æ¬¡å…ƒå§¬çˆ¬è™« (CiyuanjiCrawler)

```java
@Component
public class CiyuanjiCrawler implements BaseCrawler {

    @Override
    public CrawlerResult crawl(CrawlerConfig config) throws Exception {
        // å®ç°ç±»ä¼¼CiweimaoCrawler
        // æ ¹æ®æ¬¡å…ƒå§¬çš„HTMLç»“æ„è§£æ
    }
}
```

---

#### 4.4 èµ·ç‚¹çˆ¬è™« (QidianCrawler)

```java
@Component
public class QidianCrawler implements BaseCrawler {

    @Override
    public CrawlerResult crawl(CrawlerConfig config) throws Exception {
        // å®ç°ç±»ä¼¼CiweimaoCrawler
        // æ ¹æ®èµ·ç‚¹çš„HTMLç»“æ„è§£æ
    }
}
```

---

### 5. æ•°æ®æ¸…æ´—æ¨¡å— (DataCleaner)

**èŒè´£**ï¼š
- å»é‡æ£€æŸ¥
- æ ¼å¼è½¬æ¢
- å¼‚å¸¸æ•°æ®å¤„ç†
- ç©ºå€¼å¤„ç†

**æŠ€æœ¯å®ç°**ï¼š
```java
@Service
public class DataCleaner {

    /**
     * æ¸…æ´—å°è¯´æ•°æ®
     */
    public Novel cleanNovel(Novel novel) {
        // å»é™¤å‰åç©ºæ ¼
        novel.setTitle(trim(novel.getTitle()));
        novel.setAuthor(trim(novel.getAuthor()));

        // è¿‡æ»¤æ— æ•ˆæ ‡ç­¾
        List<String> tags = novel.getTags()
            .stream()
            .filter(tag -> !isEmpty(tag))
            .distinct()
            .collect(Collectors.toList());
        novel.setTags(tags);

        // éªŒè¯URL
        if (!isValidUrl(novel.getCoverUrl())) {
            novel.setCoverUrl(null);
        }

        return novel;
    }
}
```

---

### 6. AIæ¦‚æ‹¬æœåŠ¡ (AiSummaryService)

**èŒè´£**ï¼š
- è°ƒç”¨AI APIç”Ÿæˆç« èŠ‚æ¦‚æ‹¬
- ç¼“å­˜æ¦‚æ‹¬ç»“æœ
- æ§åˆ¶APIè°ƒç”¨é¢‘ç‡

**æŠ€æœ¯å®ç°**ï¼š
```java
@Service
public class AiSummaryService {

    @Value("${ai.api.key}")
    private String apiKey;

    @Value("${ai.api.url}")
    private String apiUrl;

    @Autowired
    private RedisTemplate<String, String> redisTemplate;

    /**
     * ç”Ÿæˆç« èŠ‚æ¦‚æ‹¬
     */
    public String summarize(String content) {
        // æ£€æŸ¥ç¼“å­˜
        String cacheKey = "ai:summary:" + DigestUtils.md5Hex(content);
        String cached = redisTemplate.opsForValue().get(cacheKey);
        if (cached != null) {
            return cached;
        }

        // è°ƒç”¨AI API
        String summary = callAiApi(content);

        // ç¼“å­˜ç»“æœï¼ˆ7å¤©ï¼‰
        redisTemplate.opsForValue().set(cacheKey, summary, 7, TimeUnit.DAYS);

        return summary;
    }

    /**
     * è°ƒç”¨æ™ºè°±AI API
     */
    private String callAiApi(String content) {
        // å®ç°APIè°ƒç”¨é€»è¾‘
        // ä½¿ç”¨æ™ºè°±AI GLM-4æ¨¡å‹
        // æç¤ºè¯ï¼šè¯·å°†ä»¥ä¸‹ç« èŠ‚å†…å®¹æ¦‚æ‹¬ä¸º100-200å­—
    }
}
```

---

### 7. åçˆ¬è™«ç­–ç•¥

#### 7.1 User-Agentæ± 

```java
@Component
public class UserAgentPool {

    private static final String[] USER_AGENTS = {
        "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
        "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
        "Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Mobile/15E148 Safari/604.1",
        // ... æ›´å¤šUser-Agent
    };

    public String getRandomUserAgent() {
        Random random = new Random();
        return USER_AGENTS[random.nextInt(USER_AGENTS.length)];
    }
}
```

#### 7.2 è¯·æ±‚é¢‘ç‡æ§åˆ¶

```java
@Component
public class RateLimiter {

    private final Map<String, Queue<Long>> requestTimes = new ConcurrentHashMap<>();

    /**
     * é™æµæ£€æŸ¥
     */
    public boolean tryAcquire(String key, int maxRequests, int timeWindow) {
        Queue<Long> queue = requestTimes.computeIfAbsent(key, k -> new LinkedList<>());
        long now = System.currentTimeMillis();

        // ç§»é™¤è¿‡æœŸçš„è¯·æ±‚è®°å½•
        while (!queue.isEmpty() && queue.peek() < now - timeWindow * 1000) {
            queue.poll();
        }

        // æ£€æŸ¥æ˜¯å¦è¶…è¿‡é™åˆ¶
        if (queue.size() >= maxRequests) {
            return false;
        }

        queue.offer(now);
        return true;
    }
}
```

#### 7.3 ä»£ç†IPæ± ï¼ˆå¯é€‰ï¼‰

```java
@Component
public class ProxyPool {

    private final List<Proxy> proxies = new ArrayList<>();

    public Proxy getRandomProxy() {
        if (proxies.isEmpty()) {
            return Proxy.NO_PROXY;
        }
        Random random = new Random();
        return proxies.get(random.nextInt(proxies.size()));
    }
}
```

---

## ğŸ“Š æŠ“å–æ•°æ®æµç¨‹

### é¦–æ¬¡æŠ“å–æµç¨‹

```
1. è·å–å¹³å°é…ç½®
   â†“
2. éå†æ ‡ç­¾åˆ—è¡¨
   â†“
3. æ„å»ºæ ‡ç­¾URL
   â†“
4. ä¸‹è½½HTMLé¡µé¢
   â†“
5. è§£æå°è¯´åˆ—è¡¨
   â†“
6. å¯¹æ¯æœ¬å°è¯´ï¼š
   6.1 æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
   6.2 å¦‚æœä¸å­˜åœ¨ï¼š
       6.2.1 è§£æå°è¯´è¯¦æƒ…
       6.2.2 æŠ“å–å‰3ç« å†…å®¹
       6.2.3 è°ƒç”¨AI APIç”Ÿæˆå‰3ç« çš„æ¦‚æ‹¬
       6.2.4 ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆåŒ…æ‹¬AIæ¦‚æ‹¬ï¼‰
   6.3 å¦‚æœå­˜åœ¨ï¼š
       6.3.1 å¯¹æ¯”æ›´æ–°æ—¶é—´
       6.3.2 æœ‰æ›´æ–°åˆ™æ›´æ–°å°è¯´ä¿¡æ¯
   â†“
7. è®°å½•çˆ¬è™«ä»»åŠ¡æ—¥å¿—
```

### å¢é‡æ›´æ–°æµç¨‹

```
1. è·å–å¹³å°é…ç½®
   â†“
2. éå†æ ‡ç­¾åˆ—è¡¨
   â†“
3. æ„å»ºURLï¼ˆæœ€æ–°æ›´æ–°ï¼‰
   â†“
4. ä¸‹è½½HTMLé¡µé¢
   â†“
5. è§£æå°è¯´åˆ—è¡¨
   â†“
6. å¯¹æ¯æœ¬å°è¯´ï¼š
   6.1 æ£€æŸ¥æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨
   6.2 å¦‚æœå­˜åœ¨ï¼š
       6.2.1 å¯¹æ¯”æ›´æ–°æ—¶é—´
       6.2.2 æœ‰æ›´æ–°åˆ™ï¼š
           6.2.2.1 æ›´æ–°å°è¯´ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€ä½œè€…ã€ç®€ä»‹ç­‰ï¼‰
           6.2.2.2 æ›´æ–°æœ€æ–°ç« èŠ‚æ ‡é¢˜å’Œæ—¶é—´
           6.2.2.3 å¢åŠ æŠ“å–æ¬¡æ•°
   â†“
7. è®°å½•çˆ¬è™«ä»»åŠ¡æ—¥å¿—
```

---

## ğŸ”§ é…ç½®æ–‡ä»¶

### application.yml

```yaml
# çˆ¬è™«é…ç½®
crawler:
  # User-Agentæ± 
  user-agents:
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
    - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
    - "Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15"

  # é™æµé…ç½®
  rate-limit:
    max-requests: 10  # æ¯ç§’æœ€å¤š10ä¸ªè¯·æ±‚
    time-window: 1    # æ—¶é—´çª—å£1ç§’

  # é‡è¯•é…ç½®
  retry:
    max-attempts: 3
    delay: 1000  # æ¯«ç§’

  # ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
  proxy:
    enabled: false
    proxies: []

# AIé…ç½®
ai:
  api:
    key: ${AI_API_KEY:your-api-key}
    url: https://open.bigmodel.cn/api/paas/v4/chat/completions
    model: glm-4
    max-tokens: 200
    timeout: 30000  # 30ç§’
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

çˆ¬è™«åŠŸèƒ½è®¾è®¡å·²å®Œæˆï¼Œä¸‹ä¸€æ­¥å°†è¿›è¡Œï¼š
1. çˆ¬è™«åå°ç®¡ç†ç•Œé¢è®¾è®¡
2. å®ç°åˆºçŒ¬çŒ«çˆ¬è™«ï¼ˆä½œä¸ºç¤ºä¾‹ï¼‰
3. æµ‹è¯•çˆ¬è™«åŠŸèƒ½
4. éƒ¨ç½²åˆ°æœåŠ¡å™¨
