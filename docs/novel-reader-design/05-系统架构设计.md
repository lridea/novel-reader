# è¯»ä¹¦ç½‘ç«™ - ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“Œ è®¾è®¡åŸåˆ™

1. **é«˜å¯ç”¨æ€§**ï¼š99.9%ç³»ç»Ÿå¯ç”¨æ€§
2. **é«˜æ€§èƒ½**ï¼šæ”¯æŒ500+ QPSï¼Œå³°å€¼1000+ QPS
3. **å¯æ‰©å±•æ€§**ï¼šæ°´å¹³æ‰©å±•èƒ½åŠ›
4. **å®‰å…¨æ€§**ï¼šæ•°æ®åŠ å¯†ã€è®¿é—®æ§åˆ¶ã€é˜²æ”»å‡»
5. **å¯ç»´æŠ¤æ€§**ï¼šæ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ã€å®Œå–„çš„æ—¥å¿—ç›‘æ§

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  H5    â”‚  â”‚ å°ç¨‹åº  â”‚  â”‚ Android â”‚  â”‚   iOS   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTPS
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ¥å…¥å±‚                             â”‚
â”‚                    Nginx (åå‘ä»£ç†)                       â”‚
â”‚           SSLè¯ä¹¦  é™æ€èµ„æº  è´Ÿè½½å‡è¡¡  é™æµ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚
           â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åç«¯æœåŠ¡      â”‚ â”‚   å®šæ—¶ä»»åŠ¡       â”‚ â”‚   çˆ¬è™«æœåŠ¡      â”‚
â”‚  Spring Boot    â”‚ â”‚  Spring Task     â”‚ â”‚  Crawler        â”‚
â”‚  API Gateway    â”‚ â”‚                  â”‚ â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç¼“å­˜å±‚        â”‚ â”‚   æ¶ˆæ¯é˜Ÿåˆ—       â”‚ â”‚   AIæœåŠ¡        â”‚
â”‚   Redis         â”‚ â”‚  RabbitMQ        â”‚ â”‚  æ™ºè°±AI API     â”‚
â”‚                 â”‚ â”‚                  â”‚ â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   PostgreSQL   â”‚  â”‚   æ–‡ä»¶å­˜å‚¨      â”‚                 â”‚
â”‚  â”‚   (ä¸šåŠ¡æ•°æ®)    â”‚  â”‚   é˜¿é‡Œäº‘OSS     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åŸºç¡€è®¾æ–½                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ç›‘æ§    â”‚  â”‚ æ—¥å¿—    â”‚  â”‚ å¤‡ä»½    â”‚  â”‚  é˜²ç«å¢™ â”‚      â”‚
â”‚  â”‚Prometheusâ”‚ â”‚  ELK    â”‚  â”‚ å®šæ—¶    â”‚  â”‚         â”‚      â”‚
â”‚  â”‚ + Grafanaâ”‚ â”‚         â”‚  â”‚ å¤‡ä»½    â”‚  â”‚         â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ æ¨¡å—åˆ’åˆ†

### 1. åç«¯æœåŠ¡æ¨¡å— (Backend Service)

#### 1.1 è®¤è¯æˆæƒæ¨¡å— (Auth)
- åŠŸèƒ½ï¼šç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€Tokenç”Ÿæˆä¸éªŒè¯
- æŠ€æœ¯æ ˆï¼šSpring Security + JWT
- APIè·¯å¾„ï¼š`/api/v1/auth/*`

#### 1.2 å°è¯´ç®¡ç†æ¨¡å— (Novel)
- åŠŸèƒ½ï¼šå°è¯´CRUDã€æœç´¢ã€ç­›é€‰
- æŠ€æœ¯æ ˆï¼šSpring Data JPA + PostgreSQLå…¨æ–‡æœç´¢
- APIè·¯å¾„ï¼š`/api/v1/novels/*`

#### 1.3 æ”¶è—ç®¡ç†æ¨¡å— (Favorite)
- åŠŸèƒ½ï¼šæ”¶è—CRUDã€åˆ†ç±»ç®¡ç†
- æŠ€æœ¯æ ˆï¼šSpring Data JPA
- APIè·¯å¾„ï¼š`/api/v1/favorites/*`ã€`/api/v1/categories/*`

#### 1.4 çˆ¬è™«ç®¡ç†æ¨¡å— (Crawler)
- åŠŸèƒ½ï¼šçˆ¬è™«ä»»åŠ¡ç®¡ç†ã€é…ç½®ç®¡ç†
- æŠ€æœ¯æ ˆï¼šJsoup + OkHttp
- APIè·¯å¾„ï¼š`/api/v1/admin/crawler/*`

#### 1.5 ç”¨æˆ·ç®¡ç†æ¨¡å— (User)
- åŠŸèƒ½ï¼šç”¨æˆ·ä¿¡æ¯ç®¡ç†
- æŠ€æœ¯æ ˆï¼šSpring Data JPA
- APIè·¯å¾„ï¼š`/api/v1/users/*`

#### 1.6 ç»Ÿè®¡æ¨¡å— (Stats)
- åŠŸèƒ½ï¼šå¹³å°ç»Ÿè®¡ã€æ•°æ®ç»Ÿè®¡
- æŠ€æœ¯æ ˆï¼šSpring Data JPA + Redisç¼“å­˜
- APIè·¯å¾„ï¼š`/api/v1/stats/*`

---

### 2. çˆ¬è™«æœåŠ¡æ¨¡å— (Crawler Service)

#### 2.1 çˆ¬è™«è°ƒåº¦å™¨ (Crawler Scheduler)
- åŠŸèƒ½ï¼šå®šæ—¶è§¦å‘çˆ¬è™«ä»»åŠ¡
- æŠ€æœ¯æ ˆï¼šSpring @Scheduled
- é¢‘ç‡ï¼šæ¯2å°æ—¶

#### 2.2 å¹³å°çˆ¬è™« (Platform Crawler)
- åŠŸèƒ½ï¼šçˆ¬å–å„å¹³å°å°è¯´æ•°æ®
- æ”¯æŒå¹³å°ï¼š
  - åˆºçŒ¬çŒ« (Ciweimao)
  - SFè½»å°è¯´ (SF Light Novel)
  - æ¬¡å…ƒå§¬ (Ciyuanji)
  - èµ·ç‚¹ (Qidian)

#### 2.3 AIæ¦‚æ‹¬æœåŠ¡ (AI Summary Service)
- åŠŸèƒ½ï¼šè°ƒç”¨AI APIç”Ÿæˆç« èŠ‚æ¦‚æ‹¬
- æŠ€æœ¯æ ˆï¼šæ™ºè°±AI API / OpenAI API
- ç­–ç•¥ï¼šé¦–æ¬¡æŠ“å–æ—¶ç”Ÿæˆï¼Œç¼“å­˜ç»“æœ

#### 2.4 æ•°æ®æ¸…æ´—æ¨¡å— (Data Cleaner)
- åŠŸèƒ½ï¼šæ•°æ®å»é‡ã€æ ¼å¼è½¬æ¢ã€å¼‚å¸¸å¤„ç†
- æŠ€æœ¯æ ˆï¼šJava Stream + æ­£åˆ™è¡¨è¾¾å¼

---

### 3. å®šæ—¶ä»»åŠ¡æ¨¡å— (Scheduled Task)

#### 3.1 å°è¯´æ›´æ–°å®šæ—¶ä»»åŠ¡
- åŠŸèƒ½ï¼šå®šæ—¶æŠ“å–å°è¯´æ›´æ–°
- é¢‘ç‡ï¼šæ¯2å°æ—¶
- å®ç°æ–¹å¼ï¼šSpring @Scheduled

#### 3.2 æ•°æ®ç»Ÿè®¡å®šæ—¶ä»»åŠ¡
- åŠŸèƒ½ï¼šç”Ÿæˆå¹³å°ç»Ÿè®¡æ•°æ®
- é¢‘ç‡ï¼šæ¯å¤©å‡Œæ™¨1ç‚¹
- å®ç°æ–¹å¼ï¼šSpring @Scheduled

#### 3.3 æ•°æ®åº“å¤‡ä»½ä»»åŠ¡
- åŠŸèƒ½ï¼šå¤‡ä»½æ•°æ®åº“
- é¢‘ç‡ï¼šæ¯å¤©å‡Œæ™¨3ç‚¹
- å®ç°æ–¹å¼ï¼šCron + pg_dump

---

### 4. ç¼“å­˜ç­–ç•¥ (Cache Strategy)

#### 4.1 Redisç¼“å­˜è®¾è®¡

**ç¼“å­˜Keyè§„èŒƒ**ï¼š
```
novel:list:{page}:{size}:{platform}:{tag}
novel:detail:{id}
user:{userId}
category:list:{userId}
stats:platform
stats:tags
```

**ç¼“å­˜ç­–ç•¥**ï¼š
- çƒ­é—¨å°è¯´åˆ—è¡¨ï¼šç¼“å­˜1å°æ—¶
- å°è¯´è¯¦æƒ…ï¼šç¼“å­˜30åˆ†é’Ÿ
- ç”¨æˆ·ä¿¡æ¯ï¼šç¼“å­˜7å¤©ï¼ˆTokenæœ‰æ•ˆæœŸï¼‰
- åˆ†ç±»åˆ—è¡¨ï¼šç¼“å­˜1å°æ—¶
- ç»Ÿè®¡æ•°æ®ï¼šç¼“å­˜1å°æ—¶

**ç¼“å­˜æ›´æ–°ç­–ç•¥**ï¼š
- ä¸»åŠ¨æ›´æ–°ï¼šæ•°æ®å˜æ›´æ—¶åˆ é™¤ç¼“å­˜
- è¢«åŠ¨è¿‡æœŸï¼šTTLè‡ªåŠ¨è¿‡æœŸ

---

### 5. æ¶ˆæ¯é˜Ÿåˆ— (Message Queue)

#### 5.1 RabbitMQé˜Ÿåˆ—è®¾è®¡

**é˜Ÿåˆ—åˆ—è¡¨**ï¼š
```
novel.crawler.queue        # çˆ¬è™«ä»»åŠ¡é˜Ÿåˆ—
novel.crawler.task.queue    # çˆ¬è™«ä»»åŠ¡ç»“æœé˜Ÿåˆ—
novel.ai.summary.queue      # AIæ¦‚æ‹¬ä»»åŠ¡é˜Ÿåˆ—
novel.notification.queue     # é€šçŸ¥é˜Ÿåˆ—ï¼ˆP1ï¼‰
```

**äº¤æ¢æœº**ï¼š
```
novel.direct                # ç›´è¿äº¤æ¢æœº
novel.topic                 # ä¸»é¢˜äº¤æ¢æœº
```

**æ¶ˆæ¯æµç¨‹**ï¼š
```
å®šæ—¶ä»»åŠ¡ â†’ novel.crawler.queue â†’ çˆ¬è™«æœåŠ¡ â†’ novel.ai.summary.queue â†’ AIæœåŠ¡
                                            â†“
                                     novel.crawler.task.queue â†’ åç«¯æœåŠ¡
```

---

## ğŸ” å®‰å…¨è®¾è®¡

### 1. è®¤è¯æˆæƒ

#### 1.1 JWT Token
- ç­¾åç®—æ³•ï¼šHS256
- æœ‰æ•ˆæœŸï¼š7å¤©
- å­˜å‚¨ä½ç½®ï¼šHttpOnly Cookie / LocalStorage

#### 1.2 æƒé™æ§åˆ¶
- RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰
- è§’è‰²ï¼š
  - `USER`ï¼šæ™®é€šç”¨æˆ·
  - `ADMIN`ï¼šç®¡ç†å‘˜

#### 1.3 æ¥å£é™æµ
- é™æµç®—æ³•ï¼šä»¤ç‰Œæ¡¶ç®—æ³•
- é™åˆ¶ç­–ç•¥ï¼š
  - æ™®é€šç”¨æˆ·ï¼š100æ¬¡/åˆ†é’Ÿ
  - ç®¡ç†å‘˜ï¼š500æ¬¡/åˆ†é’Ÿ

---

### 2. æ•°æ®å®‰å…¨

#### 2.1 å¯†ç åŠ å¯†
- åŠ å¯†ç®—æ³•ï¼šBCrypt
- å¼ºåº¦ï¼š10è½®

#### 2.2 æ•æ„Ÿæ•°æ®
- AI API Keyï¼šç¯å¢ƒå˜é‡å­˜å‚¨
- æ•°æ®åº“å¯†ç ï¼šç¯å¢ƒå˜é‡å­˜å‚¨
- Rediså¯†ç ï¼šç¯å¢ƒå˜é‡å­˜å‚¨

#### 2.3 HTTPS
- è¯ä¹¦ç±»å‹ï¼šLet's Encryptå…è´¹è¯ä¹¦
- è‡ªåŠ¨ç»­æœŸï¼šCertbot

---

### 3. é˜²æ”»å‡»ç­–ç•¥

#### 3.1 SQLæ³¨å…¥é˜²æŠ¤
- ä½¿ç”¨JPAå‚æ•°åŒ–æŸ¥è¯¢
- è¾“å…¥éªŒè¯

#### 3.2 XSSé˜²æŠ¤
- å‰ç«¯è¾“å…¥éªŒè¯
- åç«¯è¾“å‡ºè½¬ä¹‰

#### 3.3 CSRFé˜²æŠ¤
- CSRF Token
- SameSite Cookie

#### 3.4 é™æµé˜²æŠ¤
- IPé™æµï¼šé˜²æ­¢æš´åŠ›è¯·æ±‚
- æ¥å£é™æµï¼šé˜²æ­¢æ¥å£æ»¥ç”¨

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–

#### 1.1 ç´¢å¼•ä¼˜åŒ–
- ä¸»é”®ç´¢å¼•ï¼šæ‰€æœ‰è¡¨çš„ä¸»é”®
- å”¯ä¸€ç´¢å¼•ï¼šé˜²æ­¢é‡å¤æ•°æ®
- å¤åˆç´¢å¼•ï¼šå¸¸ç”¨æŸ¥è¯¢æ¡ä»¶
- å…¨æ–‡ç´¢å¼•ï¼šæœç´¢åŠŸèƒ½

#### 1.2 æŸ¥è¯¢ä¼˜åŒ–
- åˆ†é¡µæŸ¥è¯¢ï¼šé¿å…å…¨è¡¨æ‰«æ
- é¿å…N+1æŸ¥è¯¢ï¼šä½¿ç”¨JOIN
- å»¶è¿ŸåŠ è½½ï¼š@OneToManyä½¿ç”¨LAZY

#### 1.3 è¿æ¥æ± 
- HikariCPè¿æ¥æ± 
- æœ€å¤§è¿æ¥æ•°ï¼š20
- æœ€å°ç©ºé—²è¿æ¥æ•°ï¼š5

---

### 2. ç¼“å­˜ä¼˜åŒ–

#### 2.1 å¤šçº§ç¼“å­˜
- ä¸€çº§ç¼“å­˜ï¼šJPA EntityManagerï¼ˆé»˜è®¤å¼€å¯ï¼‰
- äºŒçº§ç¼“å­˜ï¼šRedis
- æœ¬åœ°ç¼“å­˜ï¼šCaffeineï¼ˆå¯é€‰ï¼‰

#### 2.2 ç¼“å­˜é¢„çƒ­
- ç³»ç»Ÿå¯åŠ¨æ—¶é¢„åŠ è½½çƒ­é—¨æ•°æ®

---

### 3. æ¥å£ä¼˜åŒ–

#### 3.1 å‹ç¼©ä¼ è¾“
- Gzipå‹ç¼©

#### 3.2 æ•°æ®æ‡’åŠ è½½
- é¦–å±åªåŠ è½½å¿…è¦æ•°æ®
- æ»šåŠ¨åŠ è½½æ›´å¤š

#### 3.3 CDNåŠ é€Ÿ
- é™æ€èµ„æºä½¿ç”¨CDN

---

## ğŸ” ç›‘æ§ä¸å‘Šè­¦

### 1. ç³»ç»Ÿç›‘æ§

#### 1.1 Prometheus + Grafana
- ç›‘æ§æŒ‡æ ‡ï¼š
  - JVMå†…å­˜ã€GC
  - è¯·æ±‚QPSã€å“åº”æ—¶é—´
  - æ•°æ®åº“è¿æ¥æ•°ã€æ…¢æŸ¥è¯¢
  - Rediså†…å­˜ä½¿ç”¨

#### 1.2 å‘Šè­¦è§„åˆ™
- CPUä½¿ç”¨ç‡ > 80%
- å†…å­˜ä½¿ç”¨ç‡ > 90%
- å“åº”æ—¶é—´ > 3ç§’
- é”™è¯¯ç‡ > 1%

---

### 2. æ—¥å¿—ç®¡ç†

#### 2.1 ELK Stack
- Elasticsearchï¼šæ—¥å¿—å­˜å‚¨
- Logstashï¼šæ—¥å¿—æ”¶é›†
- Kibanaï¼šæ—¥å¿—å¯è§†åŒ–

#### 2.2 æ—¥å¿—çº§åˆ«
- ERRORï¼šé”™è¯¯æ—¥å¿—
- WARNï¼šè­¦å‘Šæ—¥å¿—
- INFOï¼šå…³é”®ä¿¡æ¯
- DEBUGï¼šè°ƒè¯•ä¿¡æ¯ï¼ˆç”Ÿäº§ç¯å¢ƒå…³é—­ï¼‰

---

### 3. å¥åº·æ£€æŸ¥

#### 3.1 Spring Boot Actuator
- ç«¯ç‚¹ï¼š`/actuator/health`
- æ£€æŸ¥é¡¹ï¼š
  - æ•°æ®åº“è¿æ¥
  - Redisè¿æ¥
  - çˆ¬è™«æœåŠ¡çŠ¶æ€

---

## ğŸš€ éƒ¨ç½²æ¶æ„

### 1. Dockerå®¹å™¨åŒ–

#### 1.1 å®¹å™¨åˆ—è¡¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Nginx          â”‚  åå‘ä»£ç† + é™æ€èµ„æº
â”‚  :80, :443      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Spring Boot    â”‚  åç«¯æœåŠ¡
â”‚  :8080          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL     â”‚  æ•°æ®åº“
â”‚  :5432          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redis          â”‚  ç¼“å­˜
â”‚  :6379          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RabbitMQ       â”‚  æ¶ˆæ¯é˜Ÿåˆ—
â”‚  :5672, :15672  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.2 Docker Compose

```yaml
version: '3.8'

services:
  nginx:
    image: nginx:latest
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/ssl:/etc/nginx/ssl
      - ./frontend/dist:/usr/share/nginx/html
    depends_on:
      - backend
    restart: always

  backend:
    build: ./backend
    ports:
      - "8080:8080"
    environment:
      - SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/novel_reader
      - SPRING_REDIS_HOST=redis
      - SPRING_RABBITMQ_HOST=rabbitmq
    depends_on:
      - postgres
      - redis
      - rabbitmq
    restart: always

  postgres:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=novel_reader
      - POSTGRES_USER=novel_user
      - POSTGRES_PASSWORD=novel_password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: always

  redis:
    image: redis:7-alpine
    command: redis-server --requirepass redis_password
    volumes:
      - redis_data:/data
    restart: always

  rabbitmq:
    image: rabbitmq:3-management-alpine
    environment:
      - RABBITMQ_DEFAULT_USER=admin
      - RABBITMQ_DEFAULT_PASS=admin123
    ports:
      - "5672:5672"
      - "15672:15672"
    volumes:
      - rabbitmq_data:/var/lib/rabbitmq
    restart: always

volumes:
  postgres_data:
  redis_data:
  rabbitmq_data:
```

---

### 2. æœåŠ¡å™¨éƒ¨ç½²

#### 2.1 éƒ¨ç½²æµç¨‹

```bash
# 1. å…‹éš†ä»£ç 
git clone https://github.com/your-repo/novel-reader.git
cd novel-reader

# 2. æ„å»ºå‰ç«¯
cd frontend
npm install
npm run build
cd ..

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. åˆå§‹åŒ–æ•°æ®åº“
docker exec -it novel-reader_postgres_1 psql -U novel_user -d novel_reader -f /docker-entrypoint-initdb.d/init.sql

# 5. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

---

### 3. åŸŸåå’ŒSSL

#### 3.1 åŸŸåè§£æ
- Aè®°å½•ï¼š`@` â†’ æœåŠ¡å™¨IP
- Aè®°å½•ï¼š`www` â†’ æœåŠ¡å™¨IP

#### 3.2 SSLè¯ä¹¦
- ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦
- è‡ªåŠ¨ç»­æœŸ

```bash
# å®‰è£…Certbot
sudo apt-get install certbot python3-certbot-nginx

# ç”³è¯·è¯ä¹¦
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

---

## ğŸ“ˆ æ‰©å±•æ€§è®¾è®¡

### 1. æ°´å¹³æ‰©å±•

#### 1.1 åç«¯æœåŠ¡æ‰©å±•
```bash
# å¯åŠ¨å¤šä¸ªåç«¯å®ä¾‹
docker-compose up -d --scale backend=3
```

#### 1.2 æ•°æ®åº“è¯»å†™åˆ†ç¦»
- ä¸»åº“ï¼šå†™æ“ä½œ
- ä»åº“ï¼šè¯»æ“ä½œ

#### 1.3 Redisé›†ç¾¤
- ä¸»ä»å¤åˆ¶
- å“¨å…µæ¨¡å¼

---

### 2. åŠŸèƒ½æ‰©å±•

#### 2.1 å¾®æœåŠ¡åŒ–ï¼ˆP2ï¼‰
- å°†çˆ¬è™«æœåŠ¡ç‹¬ç«‹éƒ¨ç½²
- å°†AIæœåŠ¡ç‹¬ç«‹éƒ¨ç½²

#### 2.2 å¤šæ•°æ®ä¸­å¿ƒï¼ˆP2ï¼‰
- ä¸»æ•°æ®ä¸­å¿ƒ
- å¤‡ç”¨æ•°æ®ä¸­å¿ƒ

---

## ğŸ“ æŠ€æœ¯æ ˆæ€»ç»“

### åç«¯
- **æ¡†æ¶**ï¼šSpring Boot 3.2.x
- **æ•°æ®åº“**ï¼šPostgreSQL 15
- **ç¼“å­˜**ï¼šRedis 7
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šRabbitMQ 3
- **çˆ¬è™«**ï¼šJsoup + OkHttp
- **APIæ–‡æ¡£**ï¼šSpringDoc OpenAPI 3
- **æ„å»ºå·¥å…·**ï¼šMaven
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose

### å‰ç«¯
- **æ¡†æ¶**ï¼šVue 3 + TypeScript
- **è·¨å¹³å°**ï¼šUni-app
- **çŠ¶æ€ç®¡ç†**ï¼šPinia
- **UIç»„ä»¶åº“**ï¼šElement Plus / uView
- **HTTPå®¢æˆ·ç«¯**ï¼šAxios
- **æ„å»ºå·¥å…·**ï¼šVite

### åŸºç¡€è®¾æ–½
- **åå‘ä»£ç†**ï¼šNginx
- **ç›‘æ§**ï¼šPrometheus + Grafana
- **æ—¥å¿—**ï¼šELK Stack
- **SSL**ï¼šLet's Encrypt
- **CDN**ï¼šé˜¿é‡Œäº‘CDNï¼ˆå¯é€‰ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥

ç³»ç»Ÿæ¶æ„è®¾è®¡å·²å®Œæˆï¼Œå»ºè®®ä¸‹ä¸€æ­¥ï¼š
1. è¯„å®¡æ‰€æœ‰è®¾è®¡æ–‡æ¡£
2. ç¡®è®¤æŠ€æœ¯é€‰å‹
3. å¼€å§‹æ­å»ºå¼€å‘ç¯å¢ƒ
4. åˆå§‹åŒ–é¡¹ç›®ç»“æ„
5. å¼€å‘ç¬¬ä¸€ä¸ªåŠŸèƒ½æ¨¡å—
