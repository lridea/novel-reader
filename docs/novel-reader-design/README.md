# 读书网站 - 设计文档

## 📚 文档目录

本文档包含了读书网站的完整设计方案，请在正式开发前仔细阅读并评审。

---

## 📄 文档列表

### 1. [需求分析](./01-需求分析.md)
- 项目概述
- 核心功能需求
  - 数据抓取模块
  - 查询展示模块
  - 用户系统
  - 收藏管理模块
  - AI概括模块
- 技术选型建议
- 数据量预估
- 性能要求
- 安全要求
- 需求优先级

### 2. [数据库设计](./02-数据库设计.md)
- 数据库概览
- 表结构详解
  - t_user (用户表)
  - t_novel (小说表)
  - t_novel_tag (标签关联表)
  - t_chapter (章节表)
  - t_favorite (收藏表)
  - t_category (分类表)
  - t_favorite_category (收藏分类关联表)
  - t_update_log (更新日志表)
  - t_crawler_task (爬虫任务表)
- ER图
- 索引策略
- 数据库初始化脚本

### 2+. [数据库设计（MySQL版）](./02-数据库设计(MySQL版).md) ⭐
- **轻量化MySQL数据库设计**
- 10张表（新增t_crawler_config配置表）
- MySQL全文搜索支持
- 更适合当前服务器环境

### 3. [后端API设计](./03-后端API设计.md)
- 统一响应格式
- 认证机制（JWT Token）
- API接口列表
  - 认证模块 (Auth)
  - 小说模块 (Novel)
  - 收藏模块 (Favorite)
  - 收藏分类模块 (Category)
  - 用户模块 (User)
  - 爬虫管理模块 (Crawler)
  - 统计模块 (Stats)
- 技术实现示例

### 4. [前端页面设计](./04-前端页面设计.md)
- 设计规范
  - 配色方案
  - 字体规范
  - 间距规范
  - 圆角规范
- 页面结构
  - 首页 (Home)
  - 小说详情页 (Novel Detail)
  - 登录页 (Login)
  - 注册页 (Register)
  - 收藏页 (Favorites)
  - 收藏管理页 (Favorite Management)
  - 我的页面 (Profile)
  - 搜索结果页 (Search Results)
- 技术实现示例
- Uni-app 多端适配

### 5. [系统架构设计](./05-系统架构设计.md)
- 整体架构
- 模块划分
  - 后端服务模块
  - 爬虫服务模块
  - 定时任务模块
  - 缓存策略
  - 消息队列
- 安全设计
  - 认证授权
  - 数据安全
  - 防攻击策略
- 性能优化
  - 数据库优化
  - 缓存优化
  - 接口优化
- 监控与告警
- 部署架构
  - Docker容器化
  - 服务器部署
  - 域名和SSL
- 扩展性设计

### 6. [爬虫功能设计](./06-爬虫功能设计.md) ⭐ 核心优先
- **爬虫架构设计**
- 支持4个平台：
  - 刺猬猫：https://mip.ciweimao.com/
  - SF轻小说：https://book.sfacg.com/
  - 次元姬：https://www.ciyuanji.com/
  - 起点：https://www.qidian.com/
- 模块设计：
  - 爬虫调度器（定时任务）
  - 爬虫任务分发器
  - 基础爬虫接口
  - 平台爬虫实现
  - 数据清洗模块
  - AI概括服务
- 反爬虫策略：
  - User-Agent池
  - 请求频率控制
  - 代理IP池（可选）
- 抓取数据流程：
  - 首次抓取流程
  - 增量更新流程
- 配置文件示例

### 7. [爬虫后台管理界面设计](./07-爬虫后台管理界面设计.md) ⭐ 核心优先
- **可视化后台管理界面**
- 7个管理页面：
  1. 后台首页（Dashboard）- 统计图表
  2. 爬虫任务列表 - 任务管理
  3. 任务详情页 - 日志查看
  4. 平台配置页 - 参数配置
  5. 数据浏览页 - 数据管理
  6. 小说详情页 - 数据编辑
  7. 设置页 - AI/限流/通知配置
- 技术实现（Vue 3 + Element Plus）
- 完整代码示例
- API接口定义

---

## 🎯 技术栈总结

### 后端
- **框架**：Spring Boot 3.2.x
- **数据库**：MySQL 8.0 ⭐（轻量化，适合当前环境）
- **缓存**：Redis 7
- **消息队列**：RabbitMQ 3（可选，暂不使用以节省资源）
- **爬虫**：Jsoup + OkHttp
- **API文档**：SpringDoc OpenAPI 3
- **构建工具**：Maven

### 前端
- **框架**：Vue 3 + TypeScript
- **跨平台**：Uni-app（H5 + 小程序 + APP）
- **状态管理**：Pinia
- **UI组件库**：Element Plus / uView
- **HTTP客户端**：Axios
- **构建工具**：Vite

### 基础设施
- **反向代理**：Nginx
- **容器化**：Docker + Docker Compose
- **监控**：Prometheus + Grafana（可选）
- **日志**：ELK Stack（可选）
- **SSL**：Let's Encrypt

---

## 📋 开发规范

详见项目开发规范：`/home/wuying/clawd/skills/novel-reader/SKILL.md`

### 核心要求

1. **架构设计先行**
   - ✅ 已完成所有设计文档

2. **严格使用Git版本控制**
   - 每个功能点都要提交到GitHub
   - 提交信息规范

3. **文档和测试**
   - 每开发一个功能都要输出设计文档
   - 每次较大更新都要记录更新日志
   - 每完成一个模块都要进行测试
   - 测试通过后才合并到主分支

4. **代码质量**
   - 遵循编程规范
   - 使用有意义的命名
   - 注释要详细
   - 代码要易读、易维护、易扩展

---

## 🚀 下一步

### 1. 评审设计文档
请仔细阅读以上7份设计文档，如有任何问题或建议，请提出修改意见。

### 2. 确认技术选型
确认前端框架、数据库等技术选型是否符合预期。

### 3. 创建GitHub仓库
请创建以下GitHub仓库：
- **后端仓库**：`novel-reader-backend`
- **前端仓库**：`novel-reader-frontend`
- **设计文档仓库**：`novel-reader-design`（可选，或作为后端仓库的docs目录）

### 4. 准备开发环境
- 阿里云服务器：47.122.121.58（已连接 ✅）
- 服务器资源评估：
  - CPU：2核
  - 内存：3.5GB（完全满足）
  - 磁盘：49GB（充足）
- 待安装环境：
  - Docker（待安装）
  - MySQL 8.0（待安装）
  - Redis 7（待安装）

### 5. 开发优先级调整（根据用户反馈）
**核心优先级（P0）**：
1. ⭐ **爬虫功能**（首先实现）
   - 刺猬猫爬虫
   - SF轻小说爬虫
   - 次元姬爬虫
   - 起点爬虫
   - AI概括服务
2. ⭐ **爬虫后台管理界面**
   - 任务管理
   - 平台配置
   - 数据浏览
3. 数据库搭建（MySQL）
4. 后端基础框架
5. 用户系统（注册/登录）
6. 前端基础页面
7. 小说展示功能
8. 收藏管理功能

---

## 📝 待确认事项

- [x] 需求分析已完成
- [x] 数据库设计已完成（MySQL版 ⭐）
- [x] API接口设计已完成
- [x] 前端页面设计已完成
- [x] 系统架构设计已完成
- [x] **爬虫功能设计已完成** ⭐
- [x] **爬虫后台管理界面设计已完成** ⭐
- [ ] 技术栈选型是否满意（MySQL替代PostgreSQL）
- [ ] 是否有额外的功能需求
- [ ] GitHub仓库地址（请提供后端和前端仓库地址）
- [ ] 是否可以开始上传设计文档

---

## 📊 资源评估结论

✅ **阿里云服务器完全满足部署要求！**

- CPU：2核 Intel Xeon Platinum
- 内存：3.5GB（可用3.0GB）
- 磁盘：49GB（已用6.6GB，可用41GB）

部署资源需求：
- Spring Boot后端：~500MB
- MySQL数据库：~300MB
- Redis缓存：~100MB
- Nginx：~50MB
- **总计：~950MB**（有充足余量）

轻量化方案：
- ✅ 使用MySQL替代PostgreSQL（更轻量）
- ✅ 暂不使用RabbitMQ（减少300MB）
- ✅ 使用Spring定时任务替代消息队列

---

**请评审以上设计文档，并确认以下事项：**
1. 技术栈选型是否满意？（MySQL vs PostgreSQL）
2. 是否有需要修改或补充的设计文档？
3. 请提供GitHub仓库地址，我将上传设计文档
4. 确认后我将开始安装开发环境并实现爬虫功能（核心优先级）🦞
